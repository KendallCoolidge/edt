<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
<meta name="DC.Type" content="task"></meta>
<meta name="DC.Title" content="Stepping through code in the EGL debugger"></meta>
<meta name="abstract" content="This topic introduces you to debugging a program in the EGL debugger."></meta>
<meta name="description" content="This topic introduces you to debugging a program in the EGL debugger."></meta>
<meta name="DC.subject" content="debugging, EGL, basic steps, programs, EGL debugger, core"></meta>
<meta name="keywords" content="debugging, EGL, basic steps, programs, EGL debugger, core"></meta>
<meta name="DC.Relation" scheme="URI" content="../topics/cedt00500.html"></meta>
<meta name="copyright" content="(C) Copyright 2011" type="primary"></meta>
<meta name="DC.Rights.Owner" content="(C) Copyright 2011" type="primary"></meta>
<meta name="DC.Format" content="XHTML"></meta>
<meta name="DC.Identifier" content="tedt00579"></meta>
<meta name="DC.Language" content="en-us"></meta>
<link rel="stylesheet" type="text/css" href="../../org.eclipse.edt.core.doc.top/style/commonltr.css"></link>
<title>Stepping through code in the EGL debugger</title>
</head>
<body id="tedt00579"><a name="tedt00579"><!-- --></a>



<h1 class="topictitle1">Stepping through code in the EGL debugger</h1>



<div id="body"><a name="body"><!-- --></a><p>This topic introduces you to debugging a program
in the EGL debugger.</p>

<div class="p"><div class="p">To debug a sample program, create an EGL basic project,
create a package named “common,” and copy the following code into
a source file in that package:<pre class="codeblock">package common;

program MyProgram 

  function main()

    //Provide some initial values for the array of items.
    customerItems Items[] = new Items[3];
    customerItems[1].itemNumber=1;
    customerItems[2].itemNumber=2;
    customerItems[3].itemNumber=3;
    customerItems[1].itemCost=12.50;
    customerItems[2].itemCost=200;
    customerItems[3].itemCost=49.95;
    customerItems[1].itemQuantity=30;
    customerItems[2].itemQuantity=10;
    customerItems[3].itemQuantity=60;

    counter int;
    orderTotal float=0;

    //Calculate the total cost of the items.
    //Use the discountPrice function to get the discounted cost of each item.
    for (counter from 1 to customerItems.getSize() by 1)
      orderTotal += discountPrice(customerItems[counter].itemCost, 
                                  customerItems[counter].itemQuantity);
    end // for loop

    //Write the output to the console.
    SysLib.writeStderr("The total cost for the order is $" + orderTotal);
  end // main

  //Return a total price for a group of items 
  //based on the item price and a quantity discount.
  function discountPrice(itemCost float in, itemQuantity int in) returns(float)
    discountRate float=0;
    quantCost float=0;

    //Determine the discount for each quantity.
    //Discount 20% for more than 50 items.
    //Discount 5% for more than 20 items.
    case
      when (itemQuantity &gt; 50)
        discountRate = 1/5;
     when (itemQuantity &gt; 20 &amp;&amp; itemQuantity &lt;= 50)
       discountRate = 1/20;
     otherwise
       //bug - division by zero
       discountRate = 1/0;
     end

    //Multiply the cost of the item, the number of items, 
    //and the discounted price.
    quantCost = itemCost*itemQuantity*(1-discountRate); 
    quantCost = MathLib.round(quantCost, -2);

    return (quantCost);
  end // function discountPrice

end // program

Record Items 
  itemNumber    int;
  itemCost      float;
  itemQuantity  int;
end</pre>
The heart of the debugging process is to identify the
source of a problem in the code. If you generate the example program
and run it, EGL returns an error pointing to the <samp class="codeph">discountPrice</samp> function
and the expression <samp class="codeph">1/0</samp>. Assume that you are looking
for a runtime problem that is harder to find. </div>
</div>

<div class="section"><p>The
debugger always starts debugging from the logic that runs initially.
If you want to debug a library, you must step into the library. In
some cases you might benefit from writing a simple program that does
little more than to call the logic that you want to debug.</p>
To step
through an application in the EGL debugger, do as follows:</div>

<ol><li class="stepexpand"><span>Set one or more <dfn class="term">breakpoints</dfn>, which are locations
at which execution pauses.</span> <p>After the debugger pauses
at a breakpoint, you can check the current values of program variables
before telling the debugger how to proceed. Breakpoints do not affect
the generated source in any way; they are meaningful only during the
debugging session.</p>
<p>To set a breakpoint, double-click the gray
margin to the left of the code in the EGL editor. In the current example,
you might want to add breakpoints throughout the <samp class="codeph">discountPrice</samp> function
because an error told you that this function is where the error occurred.
Breakpoints are marked with blue circles in the leftmost gray area:<br></br><img src="../images/tedt00579.jpg" alt="Picture of the blue circles indicating breakpoints in the code."></img><br></br></p>
<div class="p">You
can add a breakpoint at most EGL logic statements, though not at the
following statements: <ul>
<li>A variable declaration that does not include an assignment.</li>

<li>A line of code that begins a logical unit or that gives a directive.
Examples are the <span class="synph"><span class="kwd">package</span></span> declaration or
the line that begins with <span class="synph"><span class="kwd">program</span></span>. </li>

<li>An <span class="synph"><span class="kwd">end</span></span> statement.</li>

<li>A blank line or a line that consists only of a comment.</li>

</ul>
</div>
</li>
<li class="stepexpand"><span>Run a program in the EGL debugger.</span> <p>After
you have added breakpoints to your program, you can run it in the
debugger.</p>
<div class="p">The debugger requires a launch configuration to describe
how it will run the application. You can create a launch configuration
in either of two ways: <ul>
<li>Have the debugger to create a launch configuration automatically
when you start debugging.</li>

<li>Create a launch configuration manually. For details, see <a href="tedt00582.html#debug_createlaunchconfig">tedt00582.html#debug_createlaunchconfig</a>.</li>

</ul>
In most cases, you can use the automatically created launch configuration.</div>
<ol type="a">
<li>In the Project Explorer view, right-click the EGL source program
that you want to debug and then click <span class="menucascade"><span class="uicontrol">Debug
as</span> &gt; <span class="uicontrol">EGL Java Main Application</span>
</span>. The debugger performs the following tasks:<ul>
<li>If no launch configuration exists for the program, the debugger
creates a default launch configuration. You can view this configuration
by clicking <span class="menucascade"><span class="uicontrol">Run</span> &gt; <span class="uicontrol">Debug</span>
</span>.</li>

<li>Depending on your workbench preferences, the debugger might switch
to the Debug perspective automatically or prompt you to do so. You
can switch perspectives manually by clicking <span class="menucascade"><span class="uicontrol">Window</span>
 &gt; <span class="uicontrol">Open Perspective</span> &gt; <span class="uicontrol">Other</span>
 &gt; <span class="uicontrol">Debug</span></span>.</li>

<li>The debugger begins running the program.</li>

</ul>
</li>

<li>After the debugger has started running the program, it continues
until it encounters a breakpoint, or, if you have set the preference
for it, finds the first line of executable code. At this point, the
debugger pauses and displays the following information:<ul>
<li>The EGL editor highlights the line about to be executed.</li>

<li>The Variables view shows the value of all the variables in the
current logic part, including the value of system variables. You can
use this view to track the value of a variable through the program.
You can also change the value of a variable while the debugger is
paused at a breakpoint.</li>

<li>The Debug view lists the threads running within the current run
unit. In simple terms, this view shows which program or logic part
is currently running. Use this view to resume or stop the debugging
process.</li>

<li>The Breakpoints view lists the breakpoints in the program. From
this view, you can disable a breakpoint temporarily by clearing its
check box.</li>

</ul>
</li>

<li>When you want the debugger to continue, click the <span class="uicontrol">Resume</span> button
at the top of the Debug view. The debugger continues to the next breakpoint.
You can also use one of the Step buttons to see the program execute
the next line and pause again.<p>In the example program, you can run
the program from breakpoint to breakpoint until the debugger reaches
the line <samp class="codeph">discountRate = 1/0;</samp>, at which point the
debugger returns the same error that you see in the console when running
the program.</p>
</li>

<li>When you are finished debugging, click the <span class="uicontrol">Terminate</span> button
at the top of the Debug view to stop the debugger or click the <span class="uicontrol">Resume</span> button
to allow the program to finish running.</li>

</ol>
</li>
</ol>

</div>

<anchor id="related_links"></anchor>


</body>
</html>